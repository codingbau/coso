(this.webpackJsonpCoSoSwap=this.webpackJsonpCoSoSwap||[]).push([[6],{1214:function(e,t,s){},1238:function(e,t,s){"use strict";s.r(t);var a=s(5),n=s(10),i=s(11),o=s(12),c=s(13),r=s(3),l=s.n(r),p=s(2),d=s.n(p),h=s(288),u=s(1200),b=s(1206),m=s(163),_=s(232),f=(s(1214),s(19)),k=s(16),x=s(168),g=s(47),w=s(69),j=s(1201),O=s(1203),T=s(4),S=s(28),N=s.n(S),I=s(7),v=s(0),C=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).showModal=function(e,t,s){"PaymentToken"===e&&(i.setState({visible:!0,type:t}),i.setState({modalTitle:i.props.t("liquid_choose_a_token")})),"SuccessOrFailureResult"===e&&i.setState({visible2:!0,swap_status:t})},i.csuccess=function(){h.b.success({content:i.props.t("resting_copy_succeeded")})},i.error=function(e){h.b.error({content:e,icon:Object(v.jsx)("img",{src:T.a+"resource/top_box_fail.png"}),duration:1,className:"message_is_error"})},i.handleOk=function(e){i.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1})},i.handleCancel=function(e){i.props.updateSpin(!1),i.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1})},i.goSell=Object(a.a)(l.a.mark((function e(){var t,s,a,n,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.props.item,t=i.props.SwapData,i.state.web3.utils.toChecksumAddress(i.props.owner)==i.state.web3.utils.toChecksumAddress(i.state.defaultAccount)){e.next=5;break}return i.error("\u5931\u8d25\uff0c\u6ca1\u6709\u6743\u9650"),e.abrupt("return",!1);case 5:if(!i.props.isClaimed){e.next=8;break}return i.error("\u5df2\u7ecf\u788e\u7247\u5316"),e.abrupt("return",!1);case 8:return i.props.updateSpin(!0),s=t.fromAddress,a=i.props.nftAddress,n=i.props.tokenId,o=i.form.current.getFieldsValue().NFTAmount,c=i.state.createNftOrderItem,s||(c=i.state.createNftOrderItemWithEth),e.next=17,i.state.erc721ApproveAll(a,I.REACT_APP_NFT_ORDER_ADDRESS[i.state.chainId],n);case 17:if(!e.sent){e.next=25;break}return e.next=21,c(a,n,s,o);case 21:e.sent?(i.showModal("SuccessOrFailureResult","NFTSold_OK"),i.props.updateSpin(!1),i.props.removemynftlist({defaultAccount:i.state.defaultAccount,chainId:i.state.chainId,NftAddress:a,tokenId:n}),window.location.reload()):(i.showModal("SuccessOrFailureResult","Swapped_bad"),i.props.updateSpin(!1)),e.next=27;break;case 25:i.showModal("SuccessOrFailureResult","Approved_bad"),i.props.updateSpin(!1);case 27:case"end":return e.stop()}}),e)}))),i.props.updateLanguage(i.props.Language),i.form=d.a.createRef(),i.state={isempty:0,visible:!1,visible2:!1,allCoinList:[],isPending:!1,isSpinning:!1,image:T.a+"resource/nopic.jpg",metaData:"",description:"",name:"",showBlock:1,canPool:!1,canSale:!0,recoveryPrice:0,canBuyback:!1,isAllreadyClaim:!1,igoTokensList:I.igoTokensList,showTooltip:!1,Tooltip_title:"",amount:"",flashSwap:i.props.t("layout_flash_exchange"),claimIndex:!1,timeStr:"",canCOSOBuyback:!1,canCOSOBuybackItem:{},swapPrice:"can not",choseMenuNum:0,lingquTime:0,vicNftmission:!1,visibleConfirmExchange:!1,VICBTN_TIME:!0,loaded1:!1,swapVic:{tradeNum:0,swapPoolAddress:0,tokenId:0,time:0,swapToken:0}},i}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=Object(a.a)(l.a.mark((function e(){var t,s,a,n,i,o,c,r,p,d,h,u,b,m,_,f,k,x,g,w,j,O,T,S,N,v,C,y,A,P,D,E,F,L,B,R,M,V,H,U,q,G=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.updateSpin(!0),t=this.props.nftAddress,s=this.props.tokenId,this.form.current.setFieldsValue({NFTAmount:1}),null!=localStorage.getItem("DealSetting")?this.setState({slippage:localStorage.getItem("DealSetting")}):this.setState({slippage:5}),e.next=7,Object(I.connect)();case 7:return a=e.sent,n=a.getInOwnerSwap,a.massGetBalance,i=a.dodoApi,o=a.erc20Approve,c=a.web3,r=a.getAccount,p=a.getChainId,d=a.getTokenInfo,a.getInfoList,h=a.erc721ApproveAll,u=a.getTokenList,b=a.getPairInfo,a.addErc20Liquidity,m=a.swapTokensForTokens,_=a.addETHLiquidity,f=a.getPaths,k=a.swapTokenForETH,x=a.swapETHForToken,g=a.createNftOrderItem,w=a.createNftOrderItemWithEth,j=a.erc721Approve,O=a.importNftByTokenId,T=a.getNftImage0,a.getUserIdoTokenIdList,S=a.getImageList,N=a.withDrawNft,v=a.getTokenIdSaleStatus,C=a.buyback,y=a.swapToken,A=a.SwapTokenForSwapPool,P=a.getBuybackTokenId,D=a.claimTokenForSwapPool,E=a.nftBuyback,F=a.getTradeStatus,L=a.getUserIdoTokenIdListTemp,B=a.multiGetBalance,R=a.getSwapIn,M=a.doTrade,this.setState({dodoApi:i,web3:c,owner:this.props.owner,erc20Approve:o,getTokenInfo:d,getTradeStatus:F,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,SwapTokenForSwapPool:A,getTokenIdSaleStatus:v,tokenId:s,buyback:C,swapToken:y,claimTokenForSwapPool:D,erc721ApproveAll:h,withDrawNft:N,getBuybackTokenId:P,getUserIdoTokenIdListTemp:L,getPaths:f,getSwapIn:R}),e.next=12,p();case 12:return V=e.sent,e.next=15,r();case 15:return H=e.sent,U=S(V),e.next=19,this.setState({imageList:U,dodoApi:i,web3:c,nftBuyback:E,defaultAccount:H,erc20Approve:o,getTokenInfo:d,chainId:V,doTrade:M,multiGetBalance:B,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,tokenId:s});case 19:return q=u(V),e.next=22,B(q,H).then((function(e){var t=e.balance;G.setState({defaultSwapData:{address:e.TokenList[""].address,balance:t,chainId:e.TokenList[""].chainId,decimals:e.TokenList[""].decimals,logoURI:e.TokenList[""].logoURI,name:e.TokenList[""].name,symbol:e.TokenList[""].symbol}});var s=[];for(var a in s.push({address:e.TokenList[""].address,coinIconUrl:e.TokenList[""].logoURI,coinName:e.TokenList[""].name,balance:t,coinCount:t/Math.pow(10,e.TokenList[""].decimals),decimals:e.TokenList[""].decimals,symbol:e.TokenList[""].symbol}),e.tokenInfoList){var n=e.tokenInfoList[a];s.push({address:n.token,coinIconUrl:e.TokenList[n.token].logoURI,coinName:n.name,balance:n.balance,coinCount:n.balance/Math.pow(10,n.decimals),decimals:n.decimals,symbol:n.symbol})}G.setState({allCoinList:Object(I.getTokenToTop)("",s.sort((function(e,t){return t.coinCount-e.coinCount})))})}));case 22:this.props.updateSpin(!1);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.state.choseMenuNum,this.props.item,this.props),s=t.updateSwapData,a=t.SwapData;return this.state.defaultSwapData&&0==this.state.loaded1&&(s({fromAddress:this.state.defaultSwapData.address,fromAmount:this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals)>.01?Object(I.toFixed2)(this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals),2):Object(I.toFixed2)(this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals),6),fromName:this.state.defaultSwapData.symbol,fromDecimal:this.state.defaultSwapData.decimals,fromSymbol:this.state.defaultSwapData.symbol,fromIconUrl:this.state.defaultSwapData.logoURI}),this.state.loaded1=!0),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"top_right_sell",children:Object(v.jsxs)("div",{className:"swap_chose",children:[Object(v.jsxs)("div",{className:"swap_chose_left",onClick:function(){return e.showModal("PaymentToken","from_l")},children:[Object(v.jsx)("img",{className:"chose_coin_img",src:a.fromIconUrl}),Object(v.jsx)("div",{className:"chose_coin",children:Object(v.jsxs)("div",{className:"chose_coin_btn",children:[Object(v.jsx)("span",{children:a.fromSymbol}),Object(v.jsx)("img",{src:T.a+"resource/chose_coin_new.png"})]})})]}),Object(v.jsx)("div",{className:"swap_chose_input",children:Object(v.jsx)(j.a,{ref:this.form,name:"forminputForm",autoComplete:"off",children:Object(v.jsx)(j.a.Item,{name:"NFTAmount",children:Object(v.jsx)(O.a,{defaultValue:1,onChange:function(t){e.setState({NFTAmount:t.target.value})}},this.props.SwapData.NFTAmount)})})})]})}),Object(v.jsx)("div",{className:"top_right_Buy",children:Object(v.jsx)("div",{className:"buy_btn_border",onClick:function(){return e.goSell()},children:Object(v.jsx)("div",{className:"buy_btn",children:Object(v.jsxs)("span",{children:[" ",this.props.t("Mynftdetail_sale")]})})})}),Object(v.jsxs)(b.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,className:"choiceIcon_box",footer:!1,closable:!1,children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:T.a+"resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)(w.a,{modalTitle:this.state.modalTitle,handleCancel:this.handleCancel,allCoinList:this.state.allCoinList,type:this.state.type,web3:this.state.web3,getTokenInfo:this.state.getTokenInfo,getPairInfo:this.state.getPairInfo,chainId:this.state.chainId,SwapData2:this.state.SwapData,slippage:this.state.slippage,defaultAccount:this.state.defaultAccount}),Object(v.jsx)("img",{className:"all_phone_show",src:T.a+"resource/close_new.svg",width:"40px",style:{position:"absolute",cursor:"pointer",left:"44%",bottom:"-54px",width:"40px",height:"40px"},onClick:this.handleCancel})]}),Object(v.jsxs)(b.a,{visible:this.state.visible2,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"/"==this.props.LinkUrl||"dark"==this.props.Theme?"ConfirmExchange_box":"light_img ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:T.a+"resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_border",children:Object(v.jsxs)("div",{className:"/"==this.props.LinkUrl||"dark"==this.props.Theme?"dark_ConfirmExchangeResult_main2":"light_ConfirmExchangeResult_main2",children:[Object(v.jsx)(g.default,{type:this.state.swap_status}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_btn_border all_pc_show",children:Object(v.jsx)(m.a,{block:!0,size:"large",className:"SuccessOrFailureResult_box_btn",style:{boxShadow:"none"},type:"primary",onClick:this.handleOk,children:this.props.t("Mynftdetail_switch_off")},"submit")}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_phone_close_span all_phone_show",children:Object(v.jsxs)("span",{className:"phone_close_span_s1",children:["Close after ",Object(v.jsx)("span",{className:"phone_close_span_s2",children:"3"}),"s...",Object(v.jsx)("span",{onClick:this.handleOk,className:"phone_close_span_s3",children:"Close Now"})]})})]})})]})]})}}]),s}(d.a.Component),y=Object(f.b)(k.b,k.a)(Object(_.a)()(C)),A=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(e){var s;return Object(n.a)(this,r),(s=t.call(this,e)).showModal=function(e,t,a){"PaymentToken"===e&&(s.setState({visible:!0,type:t}),s.setState({modalTitle:s.props.t("liquid_choose_a_token")})),"SuccessOrFailureResult"===e&&s.setState({visible2:!0,swap_status:t})},s.csuccess=function(){h.b.success({content:s.props.t("resting_copy_succeeded")})},s.error=function(e){h.b.error({content:e,icon:Object(v.jsx)("img",{src:"/resource/top_box_fail.png"}),duration:1,className:"message_is_error"})},s.handleOk=function(e){s.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1})},s.handleCancel=function(e){s.props.updateSpin(!1),s.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1})},s.buyback=function(){var e=Object(a.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.state.error.length>0)){e.next=4;break}return s.error(s.state.error[0]),e.abrupt("return");case 4:return s.props.updateSpin(!0),e.next=7,s.state.erc721ApproveAll(s.state.nftAddress,s.state.IGOPoolAddress);case 7:if(!e.sent){e.next=15;break}return e.next=11,s.state.buyback(s.state.IGOPoolAddress,s.state.tokenId);case 11:1==e.sent?(s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Swapped_ok"),window.location.reload()):(s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Swapped_bad")),e.next=17;break;case 15:s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Approved_bad");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.COSObuyback=function(){var e=Object(a.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=s.state.canCOSOBuybackItem){e.next=3;break}return s.error("\u975e\u521d\u59cb\u6240\u6709\u8005\u4e0d\u53ef\u56de\u6536"),e.abrupt("return");case 3:return s.props.updateSpin(!0),e.next=6,s.state.erc721Approve(t.chaininfo.nftContract,t.chaininfo.nftContract,t.tokenId);case 6:if(!e.sent){e.next=14;break}return e.next=10,s.state.nftBuyback(t.tokenId);case 10:e.sent?(s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Swapped_ok")):(s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Swapped_bad")),e.next=16;break;case 14:s.props.updateSpin(!1),s.showModal("SuccessOrFailureResult","Approved_bad");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getLocalTime=function(e){return new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")},s.props.updateLanguage(s.props.Language),s.state={isempty:0,visible:!1,visible2:!1,allCoinList:[],isPending:!1,isSpinning:!1,image:"/resource/nopic.jpg",metaData:"",description:"",name:"",showBlock:1,canPool:!1,canSale:!0,recoveryPrice:0,canBuyback:!1,isAllreadyClaim:!1,igoTokensList:I.igoTokensList,showTooltip:!1,Tooltip_title:"",amount:"",flashSwap:s.props.t("layout_flash_exchange"),claimIndex:!1,timeStr:"",canCOSOBuyback:!1,canCOSOBuybackItem:!1,swapPrice:"can not",choseMenuNum:0,lingquTime:0,isMetaOasis:!1,vicNftmission:!1,visibleConfirmExchange:!1,VICBTN_TIME:!0,loaded1:!1,swapVic:{tradeNum:0,swapPoolAddress:0,tokenId:0,time:0,swapToken:0},datangPrice:!1,buyBackEndBlock:!1},s}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=Object(a.a)(l.a.mark((function e(){var t,a,n,i,o,c,r,p,d,h,u,b,m,_,f,k,x,g,w,j,O,T,S,N,v,C,y,A,P,D,E,F,L,B,R,M,V,H,U,q,G,W,z,J,$,K,Q,X,Y,Z,ee,te,se,ae,ne,ie,oe,ce,re,le,pe,de,he,ue,be,me,_e,fe,ke,xe,ge,we,je=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.updateSpin(!0),t=this.props.nftAddress,a=this.props.tokenId,e.next=6,Object(I.connect)();case 6:return n=e.sent,i=n.getInOwnerSwap,n.massGetBalance,o=n.dodoApi,c=n.erc20Approve,r=n.web3,p=n.getAccount,d=n.getChainId,h=n.getTokenInfo,n.getInfoList,u=n.erc721ApproveAll,b=n.getTokenList,m=n.getPairInfo,n.addErc20Liquidity,_=n.swapTokensForTokens,f=n.addETHLiquidity,k=n.getPaths,x=n.swapTokenForETH,g=n.swapETHForToken,w=n.createNftOrderItem,j=n.createNftOrderItemWithEth,O=n.erc721Approve,T=n.importNftByTokenId,S=n.getNftImage0,n.getUserIdoTokenIdList,N=n.getImageList,v=n.withDrawNft,C=n.getTokenIdSaleStatus,y=n.buyback,A=n.swapToken,P=n.SwapTokenForSwapPool,D=n.getBuybackTokenId,E=n.claimTokenForSwapPool,F=n.nftBuyback,L=n.getTradeStatus,B=n.getUserIdoTokenIdListTemp,R=n.multiGetBalance,M=n.getSwapIn,V=n.getTangPrice,H=n.doTrade,U=n.getBuyBackApi,this.setState({dodoApi:o,web3:r,owner:this.props.owner,erc20Approve:c,getTokenInfo:h,getTradeStatus:L,swapTokensForTokens:_,getInOwnerSwap:i,addETHLiquidity:f,swapTokenForETH:x,swapETHForToken:g,getPairInfo:m,createNftOrderItem:w,createNftOrderItemWithEth:j,erc721Approve:O,importNftByTokenId:T,getNftImage0:S,nftAddress:t,SwapTokenForSwapPool:P,getTokenIdSaleStatus:C,tokenId:a,buyback:y,swapToken:A,claimTokenForSwapPool:E,erc721ApproveAll:u,withDrawNft:v,getBuybackTokenId:D,getUserIdoTokenIdListTemp:B,getPaths:k,getSwapIn:M}),e.next=11,d();case 11:return q=e.sent,e.next=14,p();case 14:return G=e.sent,W=N(q),z=b(q),e.next=19,this.setState({imageList:W,dodoApi:o,web3:r,nftBuyback:F,defaultAccount:G,erc20Approve:c,getTokenInfo:h,chainId:q,doTrade:H,multiGetBalance:R,swapTokensForTokens:_,getInOwnerSwap:i,addETHLiquidity:f,swapTokenForETH:x,swapETHForToken:g,getPairInfo:m,createNftOrderItem:w,createNftOrderItemWithEth:j,erc721Approve:O,importNftByTokenId:T,getNftImage0:S,nftAddress:t,tokenId:a});case 19:if(t.toUpperCase()!=I.REACT_APP_COSONFT_ADDRESS[q].toUpperCase()){e.next=28;break}return this.setState({canCOSOBuyback:!0}),e.next=23,D();case 23:if((J=e.sent).tokenIdList)for(X in J.blockNumber,J.timestamp,$=J.nftToken,K=J.tokenIdList,Q=J.otherInfo,K)K[X].tokenId2==a&&(Y=this.state.imageList,Z=void 0,ee=void 0,"0x0000000000000000000000000000000000000000"==Q.buybackToken?(Z=Y[""],ee=I.REACT_APP_ETH_ADDRESS[q]):Y[Q.buybackToken]?(Z=Y[Q.buybackToken],ee=z[Q.buybackToken].symbol):(Z="/resource/token/no_verified.svg",ee=z[Q.buybackToken].symbol),te={nftToken:$,erc20Token:Q.buybackToken,swapToken:Q.buybackToken,tokenId:K[X].tokenId2,swapPrice:Object(I.toFixed2)(Q.buybackPrice/Math.pow(10,Q.decimals),6),recoveryPrice:Q.buybackPrice,caneRecovery:"",erc20Token2:ee,toeknImage:Z,serviceCharge:Q.swapFee,nftIntroduce:"NFT\u6743\u76ca",chaininfo:{nftContract:$,xxbContract:Q.buybackToken,canSwapCoin:Q.symbol}},this.setState({canCOSOBuybackItem:te}));else this.setState({canCOSOBuybackItem:!1});e.next=76;break;case 28:return se=[],e.next=32,U(G,q,t,a);case 32:0==(ae=e.sent).length&&se.push("\u6b64NFT\u4e0d\u652f\u6301\u56de\u6536"),ne=ae.canBuyBack1,ie=ae.canBuyBackArray,ne||se.push("\u6b64NFT\u4e0d\u518d\u5c5e\u4e8e\u4f60"),ue=!1,be=parseFloat((new Date).getTime()/1e3),!1,me=s(7),_e=me.OldIgoList,e.t0=l.a.keys(ie);case 43:if((e.t1=e.t0()).done){e.next=67;break}if(fe=e.t1.value,ke=ie[fe],he=ke.statusInfo.mintStatus,ke.statusInfo.buybackStatus,ue=ke.InList,!he){e.next=65;break}if(oe=ke.fk1.endBlock,ce=ke.fk2.buyBackEndBlock,re=ke.IGOPoolAddress,le=ke.fk1.erc20Token,pe=ke.fk1.price,de=ke.fk2.swapFee,Object(I.inArray)(re,_e)){e.next=60;break}be>=oe&&be<=ce?!0:se.push("\u4e0d\u5728\u56de\u6536\u671f\u5185"),e.next=64;break;case 60:return e.next=62,r.eth.getBlockNumber();case 62:(xe=e.sent)>=oe&&xe<=ce?!0:se.push("\u4e0d\u5728\u56de\u6536\u671f\u5185");case 64:return e.abrupt("break",67);case 65:e.next=43;break;case 67:if(re||se.push("\u6b64NFT\u4e0d\u652f\u6301\u56de\u6536"),ue||se.push("\u4e0d\u652f\u6301\u56de\u6536\u7684NFT"),re&&"0x0000000000000000000000000000000000000000"==le?(ge=W[""],we=z[I.REACT_APP_ETH_ADDRESS[q]].symbol):re&&W[le]?(ge=W[le],we=z[le].symbol):re&&(ge="/resource/token/no_verified.svg",we=z[le].symbol),!this.props.isDatang){e.next=74;break}return e.next=74,V(re,a).then((function(e){e&&je.setState({datangPrice:Object(I.toFixed2)(.9*e,6)})}));case 74:return e.next=76,this.setState({IGOPoolAddress:re,tokenId:a,nftAddress:t,error:se,swapPrice:pe/Math.pow(10,18),buyBackEndBlock:ce,caneRecovery:0==se.length,toeknImage:ge,erc20Token2:we,recoveryPrice:this.props.isDatang?0:pe*(1-de/100)/Math.pow(10,18)});case 76:this.props.updateSpin(!1);case 77:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=!1;return this.state.buyBackEndBlock&&(t=this.getLocalTime(this.state.buyBackEndBlock)),Object(v.jsxs)("div",{children:[t?Object(v.jsxs)("div",{className:"buyBackTime",children:[Object(v.jsxs)("span",{className:"main_info_box_item_s1",children:[this.props.t("\u56de\u8d2d\u622a\u6b62\u65f6\u95f4"),"\uff1a"]}),Object(v.jsx)("span",{className:"main_info_box_item_s2",children:this.state.isMetaOasis?this.props.t("Repurchase_is_not_supported"):t})]}):"",this.state.canCOSOBuyback?Object(v.jsxs)("div",{className:"top_right_price",children:[Object(v.jsx)("img",{src:"/resource/USDT.png"}),Object(v.jsx)("span",{className:"price_info",children:"179 USDT"})]}):Object(v.jsxs)("div",{className:"top_right_price",children:[this.state.toeknImage?Object(v.jsx)("img",{src:this.state.toeknImage}):"",Object(v.jsxs)("span",{className:"price_info",children:[this.state.datangPrice?this.state.datangPrice:this.state.recoveryPrice?this.state.recoveryPrice:"-",this.state.erc20Token2?this.state.erc20Token2:""]})]}),Object(v.jsx)("div",{className:"top_right_Buy",children:this.state.canCOSOBuyback?Object(v.jsx)("div",{className:"buy_btn_border",onClick:function(){return e.COSObuyback(e.state.canCOSOBuybackItem)},children:Object(v.jsx)("div",{className:"buy_btn",children:Object(v.jsxs)("span",{children:[" ",this.props.t("nftSwap_recovery")," COSO"]})})}):Object(v.jsx)("div",{className:this.state.caneRecovery?"buy_btn_border":"buy_btn_border buy_btn_border_cant_use",onClick:function(){return e.buyback(e.state.SwapItem)},children:Object(v.jsx)("div",{className:"buy_btn",children:Object(v.jsx)("span",{children:this.props.t("nftSwap_recovery")})})})}),Object(v.jsxs)(b.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,className:"choiceIcon_box",footer:!1,closable:!1,children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)(w.a,{modalTitle:this.state.modalTitle,handleCancel:this.handleCancel,allCoinList:this.state.allCoinList,type:this.state.type,web3:this.state.web3,getTokenInfo:this.state.getTokenInfo,getPairInfo:this.state.getPairInfo,chainId:this.state.chainId,SwapData2:this.state.SwapData,slippage:this.state.slippage,defaultAccount:this.state.defaultAccount}),Object(v.jsx)("img",{className:"all_phone_show",src:"/resource/close_new.svg",width:"40px",style:{position:"absolute",cursor:"pointer",left:"44%",bottom:"-54px",width:"40px",height:"40px"},onClick:this.handleCancel})]}),Object(v.jsxs)(b.a,{visible:this.state.visible2,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"dark"==this.props.Theme?"ConfirmExchange_box":"light_img ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_border",children:Object(v.jsxs)("div",{className:"dark"==this.props.Theme?"dark_ConfirmExchangeResult_main2":"light_ConfirmExchangeResult_main2",children:[Object(v.jsx)(g.default,{type:this.state.swap_status}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_btn_border all_pc_show",children:Object(v.jsx)(m.a,{block:!0,size:"large",className:"SuccessOrFailureResult_box_btn",style:{boxShadow:"none"},type:"primary",onClick:this.handleOk,children:this.props.t("Mynftdetail_switch_off")},"submit")}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_phone_close_span all_phone_show",children:Object(v.jsxs)("span",{className:"phone_close_span_s1",children:["Close after ",Object(v.jsx)("span",{className:"phone_close_span_s2",children:"3"}),"s...",Object(v.jsx)("span",{onClick:this.handleOk,className:"phone_close_span_s3",children:"Close Now"})]})})]})})]})]})}}]),r}(d.a.Component),P=Object(f.b)(k.b,k.a)(Object(_.a)()(A)),D=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var i;return Object(n.a)(this,s),(i=t.call(this,e)).showModal=function(e,t,s){"PaymentToken"===e&&(i.setState({visible:!0,type:t}),i.setState({modalTitle:i.props.t("liquid_choose_a_token")})),"SuccessOrFailureResult"===e&&i.setState({visible2:!0,swap_status:t})},i.csuccess=function(){h.b.success({content:i.props.t("resting_copy_succeeded")})},i.error=function(e){h.b.error({content:e,icon:Object(v.jsx)("img",{src:"/resource/top_box_fail.png"}),duration:1,className:"message_is_error"})},i.handleOk=function(e){i.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1,VisbileDatang:!1})},i.handleCancel=function(e){i.props.updateSpin(!1),i.setState({visible:!1,visible2:!1,visibleConfirmExchange:!1,VisbileDatang:!1})},i.getPool=function(){var e=Object(a.a)(l.a.mark((function e(t,s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.state.canPool){e.next=3;break}return i.error("\u5f53\u524dNFT\u4e0d\u652f\u6301\u788e\u7247\u5316"),e.abrupt("return",!1);case 3:if(!t.useSwapPool){e.next=29;break}if(-1!=s){e.next=7;break}return i.error(i.props.t("yiquanbulingqu")),e.abrupt("return");case 7:if(!1!==s){e.next=21;break}return i.props.updateSpin(!0),e.next=11,i.state.erc721ApproveAll(t.chaininfo.nftContract,t.swapPool);case 11:if(!e.sent){e.next=17;break}return e.next=15,i.state.SwapTokenForSwapPool(t.swapPool,t.tokenId).then((function(e){0==e?(i.showModal("SuccessOrFailureResult","Swapped_bad"),i.props.updateSpin(!1)):(i.showModal("SuccessOrFailureResult","Swapped_ok"),window.location.reload(),i.props.updateSpin(!1))})).catch((function(e){i.showModal("SuccessOrFailureResult","Swapped_bad"),i.props.updateSpin(!1)}));case 15:e.next=19;break;case 17:i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Approved_bad");case 19:e.next=27;break;case 21:if(0!=t.userClaimList2[s].canClaim){e.next=24;break}return i.error(i.props.t("Subscription_notime")),e.abrupt("return");case 24:return i.props.updateSpin(!0),e.next=27,i.state.claimTokenForSwapPool(t.swapPool,t.tokenId,s).then((function(e){0==e?(i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Swapped_bad")):(i.showModal("SuccessOrFailureResult","Swapped_ok"),window.location.reload(),i.props.updateSpin(!1))})).catch((function(e){i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Swapped_bad")}));case 27:e.next=42;break;case 29:return i.props.updateSpin(!0),e.next=32,i.state.erc721ApproveAll(t.chaininfo.nftContract,t.chaininfo.igoContract);case 32:if(!e.sent){e.next=40;break}return e.next=36,i.state.swapToken(t.chaininfo.igoContract,t.tokenId);case 36:1==e.sent?(i.showModal("SuccessOrFailureResult","Swapped_ok"),i.props.updateSpin(!1)):(i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Swapped_bad")),e.next=42;break;case 40:i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Approved_bad");case 42:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),i.goPoolDatang=function(){var e=Object(a.a)(l.a.mark((function e(t,s){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.state.DatangPhoneNumber,/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(a)){e.next=5;break}return i.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"),e.abrupt("return",!1);case 5:return i.props.updateSpin(!0),e.next=8,i.state.erc721ApproveAll(t.chaininfo.nftContract,t.swapPool);case 8:if(!e.sent){e.next=16;break}return e.next=12,i.state.SwapTokenForSwapPoolForDaTang(t.swapPool,t.tokenId,a);case 12:1==e.sent?(i.showModal("SuccessOrFailureResult","Swapped_ok"),i.props.updateSpin(!1)):(i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Swapped_bad")),e.next=18;break;case 16:i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Approved_bad");case 18:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),i.showVICmission=Object(a.a)(l.a.mark((function e(){var t,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.state.getPaths(I.REACT_APP_ETH_ADDRESS[i.state.chainId],i.state.swapVic.swapToken,[]);case 2:t=e.sent,s=i.state.getSwapIn(t,2e3),a=s.Amount,i.setState({VICamount:a,visibleConfirmExchange:!0});case 6:case"end":return e.stop()}}),e)}))),i.onSubmitConfirm=Object(a.a)(l.a.mark((function e(){var t,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState({visibleConfirmExchange:!1}),i.props.updateSpin(!0),e.next=4,i.state.getPaths(I.REACT_APP_ETH_ADDRESS[i.state.chainId],i.state.swapVic.swapToken,[]);case 4:return t=e.sent,s=i.state.getSwapIn(t,2e3),a=s.Amount,e.next=9,i.state.doTrade(i.state.swapVic.swapPoolAddress,i.state.swapVic.tokenId,i.state.swapVic.time,a).then((function(e){e?(i.showModal("SuccessOrFailureResult","Swapped_ok"),i.props.updateSpin(!1),window.location.reload()):(i.props.updateSpin(!1),i.showModal("SuccessOrFailureResult","Swapped_bad"))}));case 9:case"end":return e.stop()}}),e)}))),i.props.updateLanguage(i.props.Language),i.state={isempty:0,visible:!1,visible2:!1,allCoinList:[],isPending:!1,isSpinning:!1,image:"/resource/nopic.jpg",metaData:"",description:"",name:"",showBlock:1,canPool:!1,canSale:!0,recoveryPrice:0,canBuyback:!1,isAllreadyClaim:!1,igoTokensList:I.igoTokensList,showTooltip:!1,Tooltip_title:"",amount:"",flashSwap:i.props.t("layout_flash_exchange"),claimIndex:!1,timeStr:"",canCOSOBuyback:!1,canCOSOBuybackItem:!1,swapPrice:"-",choseMenuNum:0,lingquTime:0,vicNftmission:!1,visibleConfirmExchange:!1,VICBTN_TIME:!0,loaded1:!1,swapVic:{tradeNum:0,swapPoolAddress:0,tokenId:0,time:0,swapToken:0},isDatang:i.props.isDatang,VisbileDatang:!1},i}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=Object(a.a)(l.a.mark((function e(){var t,s,a,n,i,o,c,r,p,d,h,u,b,m,_,f,k,x,g,w,j,O,T,S,N,v,C,y,A,P,D,E,F,L,B,R,M,V,H,U,q,G,W,z,J,$,K,Q,X,Y,Z,ee,te,se=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.updateSpin(!0),t=this.props.nftAddress,s=this.props.tokenId,null!=localStorage.getItem("DealSetting")?this.setState({slippage:localStorage.getItem("DealSetting")}):this.setState({slippage:5}),e.next=6,Object(I.connect)();case 6:return a=e.sent,n=a.getInOwnerSwap,a.massGetBalance,i=a.dodoApi,o=a.erc20Approve,c=a.web3,r=a.getAccount,p=a.getChainId,d=a.getTokenInfo,a.getInfoList,h=a.erc721ApproveAll,u=a.getTokenList,b=a.getPairInfo,a.addErc20Liquidity,m=a.swapTokensForTokens,_=a.addETHLiquidity,f=a.getPaths,k=a.swapTokenForETH,x=a.swapETHForToken,g=a.createNftOrderItem,w=a.createNftOrderItemWithEth,j=a.erc721Approve,O=a.importNftByTokenId,T=a.getNftImage0,a.getUserIdoTokenIdList,S=a.getImageList,N=a.withDrawNft,v=a.getTokenIdSaleStatus,C=a.buyback,y=a.swapToken,A=a.SwapTokenForSwapPool,P=a.getBuybackTokenId,D=a.claimTokenForSwapPool,E=a.nftBuyback,F=a.getTradeStatus,L=a.getUserIdoTokenIdListTemp,B=a.multiGetBalance,R=a.getSwapIn,M=a.doTrade,V=a.SwapTokenForSwapPoolForDaTang,H=a.getTangPrice,this.setState({dodoApi:i,web3:c,owner:this.props.owner,erc20Approve:o,getTokenInfo:d,SwapTokenForSwapPoolForDaTang:V,getTradeStatus:F,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,SwapTokenForSwapPool:A,getTokenIdSaleStatus:v,tokenId:s,buyback:C,swapToken:y,claimTokenForSwapPool:D,erc721ApproveAll:h,withDrawNft:N,getBuybackTokenId:P,getUserIdoTokenIdListTemp:L,getPaths:f,getSwapIn:R,getTangPrice:H}),e.next=11,p();case 11:return U=e.sent,e.next=14,r();case 14:return q=e.sent,G=S(U),e.next=18,this.setState({imageList:G,dodoApi:i,web3:c,nftBuyback:E,defaultAccount:q,erc20Approve:o,getTokenInfo:d,chainId:U,doTrade:M,multiGetBalance:B,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,tokenId:s});case 18:return W=u(U),z=!1,e.next=22,L(this.state.owner,t,s,(function(e){for(var a in e)e[a].chaininfo.nftContract==t&&e[a].tokenId==s&&(z=e[a])}));case 22:if(!z){e.next=75;break}if(1!=z.caneRecovery&&1!=z.canSwapToken){e.next=75;break}if(this.setState({swapPrice:z.swapPrice,SwapItem:z}),"0x0000000000000000000000000000000000000000"==z.swapToken?this.setState({swapTokenImage:G[""],swapToken2:I.REACT_APP_ETH_ADDRESS[this.state.chainId]}):G[z.swapToken]?this.setState({swapTokenImage:G[z.swapToken],swapToken2:W[z.swapToken].symbol}):this.setState({swapTokenImage:"/resource/token/no_verified.svg",swapToken2:W[z.swapToken.symbol]}),!z.canSwapToken){e.next=74;break}if(this.setState({canPool:!0}),!(z.useSwapPool&&z.userClaimList2.length>0)){e.next=73;break}for(J="",$="",K="",Q=!1,X="",Y=this.props.t("layout_flash_exchange"),Z=0;Z<z.userClaimList2.length;Z++)ee=this.props.t("didi")+(Z+1)+this.props.t("cilingqu")+z.userClaimList2[Z].amount,J+=ee+";";$=this.props.t("suipianhuahou")+z.swapPrice+this.props.t("meibifen")+z.userClaimList2.length+this.props.t("cilingqu")+J,te=0,0,this.setState({lingquTime:z.userClaimList2.length}),Z=0;case 41:if(!(Z<z.userClaimList2.length)){e.next=58;break}if(0!=z.userClaimList2[Z].hasClaim||0==z.userClaimList2[Z].tokenId){e.next=53;break}return this.setState({isAllreadyClaim:!0}),Y=this.props.t("swap_nft_gets"),K=" "+z.userClaimList2[Z].amount+"/"+(z.swapPrice-te),Q=Z,X=this.state.igoTokensList[z.chaininfo.nftContract].swapRule[Z],Q,this.setState({showBlock:2}),e.abrupt("break",58);case 53:Y=this.props.t("layout_flash_exchange");case 54:te+=Number(z.userClaimList2[Z].amount);case 55:Z++,e.next=41;break;case 58:Z=0;case 59:if(!(Z<z.userClaimList2.length)){e.next=69;break}if(1!=z.userClaimList2[0].hasClaim||0==z.userClaimList2[0].tokenId||!Object(I.inArray)(z.chaininfo.nftContract,["0x9CbfD7E47C259Feeb0B08Af4bDa719B179a5E75F","0x74E125aE3182BE9786313DcAF717664F6ec01c2a"])){e.next=66;break}if(this.setState({vicNftmission:!0}),!(0==z.userClaimList2[Z].hasClaim&&1==z.userClaimList2[Z].canClaim&&1==z.userClaimList2[0].hasClaim||0==z.userClaimList2[Z].hasClaim&&1==z.userClaimList2[Z-1].hasClaim&&1==z.userClaimList2[0].hasClaim)){e.next=66;break}return this.setState({vicNftmission:!0}),F(z.swapPool,z.tokenId,Z).then((function(e){if(e){var t=z.swapToken,s=z.swapPool,a=z.tokenId;if(e.useTradeCheck){var n=e.tradeNum,i=e.tradeMinTime,o=Number(1e3*Number(e.tradeTime)),c=Number((new Date).getTime());0==o?se.setState({swapVic:{tradeNum:n,swapPoolAddress:s,tokenId:a,time:Z,swapToken:t},VICBTN_R:!1,VICBTN_L:!0,VICBTN_TIME:!0}):o>0&&c-o>=1e3*Number(i)?se.setState({VICBTN_R:!0,VICBTN_L:!1,VICBTN_TIME:!0}):o>0&&c-o<1e3*Number(i)&&se.setState({VICBTN_R:!1,VICBTN_L:!1,VICBTN_TIME:!1})}else se.setState({vicNftmission:!1})}})),e.abrupt("break",69);case 66:Z++,e.next=59;break;case 69:z.userClaimList2[z.userClaimList2.length-1].hasClaim&&(K=this.props.t("yiquanbulingqu"),Q=-1),this.setState({timeStr:X,claimIndex:Q,showTooltip:!0,Tooltip_title:$,amount:K,flashSwap:Y}),e.next=74;break;case 73:this.setState({flashSwap:this.props.t("layout_flash_exchange")});case 74:"0x66dcee6605a0E5e1d4dcDf3972339618e2082CBc"==z.chaininfo.nftContract&&this.setState({canBuyback:!1,canPool:!1});case 75:this.props.updateSpin(!1);case 76:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.state.choseMenuNum,this.props.item,this.props),s=t.updateSwapData;t.SwapData;return this.state.defaultSwapData&&0==this.state.loaded1&&(s({fromAddress:this.state.defaultSwapData.address,fromAmount:this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals)>.01?Object(I.toFixed2)(this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals),2):Object(I.toFixed2)(this.state.defaultSwapData.balance/Math.pow(10,this.state.defaultSwapData.decimals),6),fromName:this.state.defaultSwapData.symbol,fromDecimal:this.state.defaultSwapData.decimals,fromSymbol:this.state.defaultSwapData.symbol,fromIconUrl:this.state.defaultSwapData.logoURI}),this.state.loaded1=!0),Object(v.jsxs)("div",{children:[this.state.showTooltip?Object(v.jsxs)("div",{className:"info_box56",children:[Object(v.jsxs)("div",{className:"details_info_box_flex ",children:[Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[" ",this.props.t("Number_of_coins_received"),":"]}),Object(v.jsx)("span",{className:"details_info_txt",children:this.state.swapPrice})]}),Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[" ",this.props.t("Receiving_order"),":"]}),Object(v.jsxs)("span",{className:"details_info_txt",children:[Object(v.jsx)("span",{className:"main_info_box_item_s2 main_info_box_item_s3",onClick:function(){return e.setState({showTooltip2:!e.state.showTooltip2})},children:this.props.t("click_to_view")}),1==this.state.showTooltip2?Object(v.jsx)("div",{className:"Tooltip_title\u2014\u2014box",children:this.state.Tooltip_title}):""]})]}),Object(v.jsx)("div",{className:"details_info_box "})]}),Object(v.jsxs)("div",{className:"details_info_box info_box2",children:[Object(v.jsx)("span",{className:"details_info_title",children:" "}),Object(v.jsxs)("span",{className:"details_info_txt",children:[" ",this.state.timeStr]})]})]}):"",this.state.isDatang?"":Object(v.jsxs)("div",{className:"top_right_price",children:[this.state.swapTokenImage?Object(v.jsx)("img",{src:this.state.swapTokenImage}):"",Object(v.jsxs)("span",{className:"price_info",children:[" ",this.state.swapPrice]})]}),Object(v.jsx)("div",{className:"top_right_Buy",children:Object(v.jsxs)("div",{children:[this.state.vicNftmission?Object(v.jsx)("div",{type:"primary",htmlType:"submit",block:!0,size:"large",className:this.state.VICBTN_L?"buy_btn_border buy_btn_border_cant_use do_mission_btn":"buy_btn_border buy_btn_border_cant_use vicNftmissionbtn_none do_mission_btn",onClick:this.state.VICBTN_L?function(){return e.showVICmission()}:function(){return e.error("\u4efb\u52a1\u5df2\u5b8c\u6210\uff0c\u5c1a\u672a\u5230\u89e3\u9501\u65f6\u95f4")},children:Object(v.jsx)("div",{className:"buy_btn ",children:Object(v.jsx)("span",{children:"\u505aVIC\u4efb\u52a1"})})}):"",this.state.isDatang?Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"buy_btn_border buy_btn_border_cant_use",onClick:function(){return e.setState({VisbileDatang:!0})},children:Object(v.jsx)("div",{className:"buy_btn",children:Object(v.jsx)("span",{children:"\u53bb\u7ed1\u5b9a"})})}),Object(v.jsx)("div",{className:"Datang_tip_box",children:Object(v.jsxs)("span",{className:"Datang_tip_box_s1",children:[this.props.t("Dtangtishi1"),Object(v.jsxs)("span",{className:"Datang_tip_box_s2",children:["  ",this.props.t("Dtangtishi2")]})," ",this.props.t("Dtangtishi3")]})})]}):Object(v.jsx)("div",{className:this.state.vicNftmission?this.state.VICBTN_R?"buy_btn_border buy_btn_border_cant_use":"buy_btn_border buy_btn_border_cant_use vicNftmissionbtn_none":"buy_btn_border buy_btn_border_cant_use",onClick:this.state.vicNftmission?this.state.VICBTN_R?function(){return e.getPool(e.state.SwapItem,e.state.claimIndex)}:this.state.VICBTN_TIME?function(){return e.error("\u9700\u5b8c\u6210\u524d\u7f6e\u5b8c\u6210\u4efb\u52a1")}:function(){return e.error("\u5c1a\u672a\u5230\u89e3\u9501\u65f6\u95f4")}:function(){return e.getPool(e.state.SwapItem,e.state.claimIndex)},children:Object(v.jsx)("div",{className:"buy_btn",children:Object(v.jsxs)("span",{children:[this.state.flashSwap,this.state.amount]})})})]})}),Object(v.jsxs)(b.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,className:"choiceIcon_box",footer:!1,closable:!1,children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-2px",top:"0px"},onClick:this.handleCancel}),Object(v.jsx)(w.a,{modalTitle:this.state.modalTitle,handleCancel:this.handleCancel,allCoinList:this.state.allCoinList,type:this.state.type,web3:this.state.web3,getTokenInfo:this.state.getTokenInfo,getPairInfo:this.state.getPairInfo,chainId:this.state.chainId,SwapData2:this.state.SwapData,slippage:this.state.slippage,defaultAccount:this.state.defaultAccount}),Object(v.jsx)("img",{className:"all_phone_show",src:"/resource/close_new.svg",width:"20px",style:{position:"absolute",cursor:"pointer",left:"44%",bottom:"-54px",width:"40px",height:"40px"},onClick:this.handleCancel})]}),Object(v.jsxs)(b.a,{visible:this.state.visible2,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"dark"==this.props.Theme?"ConfirmExchange_box":"light_img ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_border",children:Object(v.jsxs)("div",{className:"dark"==this.props.Theme?"dark_ConfirmExchangeResult_main2":"light_ConfirmExchangeResult_main2",children:[Object(v.jsx)(g.default,{type:this.state.swap_status}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_btn_border all_pc_show",children:Object(v.jsx)(m.a,{block:!0,size:"large",className:"SuccessOrFailureResult_box_btn",style:{boxShadow:"none"},type:"primary",onClick:this.handleOk,children:this.props.t("Mynftdetail_switch_off")},"submit")}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_phone_close_span all_phone_show",children:Object(v.jsxs)("span",{className:"phone_close_span_s1",children:["Close after ",Object(v.jsx)("span",{className:"phone_close_span_s2",children:"3"}),"s...",Object(v.jsx)("span",{onClick:this.handleOk,className:"phone_close_span_s3",children:"Close Now"})]})})]})})]}),Object(v.jsxs)(b.a,{visible:this.state.visibleConfirmExchange,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"ConfirmExchangeResult_border2",children:Object(v.jsxs)("div",{className:"dark"==this.props.Theme?"dark_NewConfirmExchange_main":"light_NewConfirmExchange_main",children:[Object(v.jsx)(x.a,{VICamount:this.state.VICamount,tradeNum:this.state.swapVic.tradeNum,modalTitle:this.props.t("home_cannot_confirm")}),Object(v.jsx)("div",{className:"btn_border",children:Object(v.jsx)(m.a,{htmlType:"submit",block:!0,size:"large",className:"ConfirmExchange_box_btn",style:{boxShadow:"none"},type:"primary",onClick:function(){return e.onSubmitConfirm()},children:this.props.t("home_cannot_confirm")},"submit")})]})})]}),Object(v.jsxs)(b.a,{visible:this.state.VisbileDatang,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:"/resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-13px",top:"-13px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"ConfirmExchangeResult_border2",children:Object(v.jsxs)("div",{className:"ConfirmExchangeResult_main2",children:[Object(v.jsx)("div",{className:"title_box",children:Object(v.jsx)("span",{children:"Input your TEL"})}),Object(v.jsx)("input",{className:"suipianhua_dt_input",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",type:"text",onChange:function(t){e.setState({DatangPhoneNumber:t.target.value})}}),Object(v.jsx)("div",{className:"btn_border suipianhua_dt_btn",children:Object(v.jsx)(m.a,{htmlType:"submit",block:!0,size:"large",className:"ConfirmExchange_box_btn",style:{boxShadow:"none"},type:"primary",onClick:function(){return e.goPoolDatang(e.state.SwapItem,e.state.claimIndex)},children:"\u786e\u8ba4\u7ed1\u5b9a\u5e76\u788e\u7247\u5316\u6b64NFT"},"submit")}),Object(v.jsx)("span",{className:" suipianhua_dt_s1",children:"*\u8f93\u5165\u6ce8\u518c\u5927\u5510\u7075\u5883\u7684\u540c\u4e00\u624b\u673a\u53f7\u3002"})]})})]})]})}}]),s}(d.a.Component),E=Object(f.b)(k.b,k.a)(Object(_.a)()(D)),F=function(e){Object(o.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).csuccess=function(){h.b.success({content:a.props.t("resting_copy_succeeded"),icon:Object(v.jsx)("img",{src:T.a+"resource/top_box_success.png"}),duration:.5})},a.props.updateLanguage(a.props.Language),a.form=d.a.createRef(),a.state={isempty:0,visible:!1,visible2:!1,allCoinList:[],isPending:!1,isSpinning:!1,image:T.a+"resource/nopic.jpg",metaData:"",description:"",name:"",showBlock:1,canPool:!1,canSale:!0,recoveryPrice:0,canBuyback:!1,isAllreadyClaim:!1,igoTokensList:I.igoTokensList,showTooltip:!1,Tooltip_title:"",amount:"",flashSwap:a.props.t("layout_flash_exchange"),claimIndex:!1,timeStr:"",canCOSOBuyback:!1,canCOSOBuybackItem:{},swapPrice:"can not",choseMenuNum:0,lingquTime:0,vicNftmission:!1,visibleConfirmExchange:!1,VICBTN_TIME:!0,loaded1:!1,swapVic:{tradeNum:0,swapPoolAddress:0,tokenId:0,time:0,swapToken:0}},a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=Object(a.a)(l.a.mark((function e(){var t,s,a,n,i,o,c,r,p,d,h,u,b,m,_,f,k,x,g,w,j,O,T,S,N,v,C,y,A,P,D,E,F,L,B,R,M,V,H,U,q=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.item.NftAddress,s=this.props.item.tokenId,null!=localStorage.getItem("DealSetting")?this.setState({slippage:localStorage.getItem("DealSetting")}):this.setState({slippage:5}),e.next=5,Object(I.connect)();case 5:return a=e.sent,n=a.getInOwnerSwap,a.massGetBalance,i=a.dodoApi,o=a.erc20Approve,c=a.web3,r=a.getAccount,p=a.getChainId,d=a.getTokenInfo,a.getInfoList,h=a.erc721ApproveAll,u=a.getTokenList,b=a.getPairInfo,a.addErc20Liquidity,m=a.swapTokensForTokens,_=a.addETHLiquidity,f=a.getPaths,k=a.swapTokenForETH,x=a.swapETHForToken,g=a.createNftOrderItem,w=a.createNftOrderItemWithEth,j=a.erc721Approve,O=a.importNftByTokenId,T=a.getNftImage0,a.getUserIdoTokenIdList,S=a.getImageList,N=a.withDrawNft,v=a.getTokenIdSaleStatus,C=a.buyback,y=a.swapToken,A=a.SwapTokenForSwapPool,P=a.getBuybackTokenId,D=a.claimTokenForSwapPool,E=a.nftBuyback,F=a.getTradeStatus,L=a.getUserIdoTokenIdListTemp,B=a.multiGetBalance,R=a.getSwapIn,M=a.doTrade,this.setState({dodoApi:i,web3:c,erc20Approve:o,getTokenInfo:d,isClaimed:this.props.item.isClaimed,getTradeStatus:F,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,SwapTokenForSwapPool:A,getTokenIdSaleStatus:v,tokenId:s,buyback:C,swapToken:y,claimTokenForSwapPool:D,erc721ApproveAll:h,withDrawNft:N,getBuybackTokenId:P,getUserIdoTokenIdListTemp:L,getPaths:f,getSwapIn:R}),e.next=10,p();case 10:return V=e.sent,e.next=13,r();case 13:return H=e.sent,U=S(V),e.next=17,O(t,s).then((function(e){e.tokenURI&&(q.setState({NftDefaultDetail:e,metaData:e.tokenURI,owner:e.owner}),T(e.tokenURI).then((function(e){q.setState({name:e.name,image:e.image,description:e.description})})))}));case 17:return e.next=19,this.setState({imageList:U,dodoApi:i,web3:c,nftBuyback:E,defaultAccount:H,erc20Approve:o,getTokenInfo:d,chainId:V,doTrade:M,multiGetBalance:B,swapTokensForTokens:m,getInOwnerSwap:n,addETHLiquidity:_,swapTokenForETH:k,swapETHForToken:x,getPairInfo:b,createNftOrderItem:g,createNftOrderItemWithEth:w,erc721Approve:j,importNftByTokenId:O,getNftImage0:T,nftAddress:t,tokenId:s});case 19:u(V);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.choseMenuNum,s=this.props.item,a=this.props,n=(a.updateSwapData,a.SwapData,!1);return this.state.nftAddress==I.DaTangNFT[this.state.chainId]&&(n=!0),Object(v.jsx)("div",{className:"/"==this.props.LinkUrl||"dark"==this.props.Theme?"dark":"light",children:Object(v.jsxs)("div",{className:"NewMyNftDetail",children:[Object(v.jsxs)("div",{className:"NewNftImgListDetail_top",children:[Object(v.jsx)("div",{className:"NewNftImgListDetail_top_left",children:Object(v.jsxs)("div",{className:"nft_img",children:[Object(v.jsx)("img",{className:"nft_img_img",src:s.nftImg}),this.props.item.isClaimed?Object(v.jsx)("div",{className:"status_icon_box",children:Object(v.jsx)("img",{src:T.a+"resource/new_my_claim_icon.svg"})}):""]})}),Object(v.jsxs)("div",{className:"NewNftImgListDetail_top_right",children:[Object(v.jsx)("div",{className:"top_right_title_box",children:Object(v.jsx)("span",{children:s.nftName})}),Object(v.jsxs)("div",{className:"top_right_info",children:[Object(v.jsxs)("div",{className:"right_box_chose_menu",children:[Object(v.jsxs)("div",{className:"chose_menu_title",children:[Object(v.jsx)("span",{className:0===t?"chose_menu_title_is_chose":"",onClick:function(){e.setState({choseMenuNum:0})},children:this.props.t("Mynftdetail_sale")}),Object(v.jsx)("span",{className:1===t?"chose_menu_title_is_chose":"",onClick:function(){e.setState({choseMenuNum:1})},children:this.props.t("nftSwap_recovery")})," ",Object(v.jsx)("span",{className:2===t?"chose_menu_title_is_chose":"",onClick:function(){e.setState({choseMenuNum:2})},children:this.props.t("layout_flash_exchange")})]}),Object(v.jsxs)("div",{className:"chose_menu_line",children:[Object(v.jsx)("div",{className:0===t?"chose_menu_line_sell":"chose_menu_line_sell_not_chose"}),Object(v.jsx)("div",{className:1===t?"chose_menu_line_recycle":"chose_menu_line_recycle_not_chose"}),Object(v.jsx)("div",{className:2===t?"chose_menu_line_fragmentation":"chose_menu_line_fragmentation_not_chose"})]})]}),Object(v.jsxs)("div",{className:"right_box_details",children:[Object(v.jsxs)("div",{className:"details_info_box_flex",children:[Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[this.props.t("NFT\u7f16\u53f7"),":"]}),Object(v.jsxs)("span",{className:"details_info_txt",children:["# ",s.tokenId]})]}),Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[" ",this.props.t("nftSwap_chain_information"),":"," "]}),Object(v.jsx)("span",{className:"details_info_txt",children:56==this.state.chainId?"bsc":128==this.state.chainId?"heco":"orther"})]}),Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title ",children:[" ",this.props.t("nftorderdetail_asset_agreement"),":"]}),Object(v.jsx)("span",{className:"details_info_txt",children:"ERC721 "})]})]}),Object(v.jsxs)("div",{className:"details_info_box info_box2",children:[Object(v.jsxs)("span",{className:"details_info_title ",children:[" ",this.props.t("Mynftdetail_owner"),":"]}),Object(v.jsxs)("span",{className:"details_info_txt",children:[" ",this.state.owner]}),Object(v.jsx)("img",{src:T.a+"resource/copy_new.png",onClick:function(){return N()(e.state.owner,e.csuccess())}})]}),Object(v.jsxs)("div",{className:"details_info_box",children:[Object(v.jsxs)("span",{className:"details_info_title info_box2",children:[this.props.t("Mynftdetail_contract address"),":"]}),Object(v.jsx)("span",{className:"details_info_txt",children:s.NftAddress}),Object(v.jsx)("img",{src:T.a+"resource/copy_new.png",onClick:function(){return N()(s.NftAddress,e.csuccess())}})]}),n?Object(v.jsxs)("div",{className:"details_info_box",children:[Object(v.jsx)("span",{className:"details_info_title info_box2",children:"\u4f4d\u7f6e\u8be6\u60c5:"}),Object(v.jsx)("span",{className:"details_info_txt",children:this.state.name})]}):"",n?Object(v.jsxs)("div",{className:"details_info_box",children:[Object(v.jsx)("span",{className:"details_info_title info_box2",children:"\u67e5\u770b\u5730\u56fe:"}),Object(v.jsx)("span",{className:"details_info_txt",onClick:function(){return e.setState({imagevusuvle:!0})},children:"\u70b9\u51fb\u67e5\u770b"}),Object(v.jsx)(u.a,{width:200,style:{display:"none"},src:T.a+"resource/DatangP.png",preview:{visible:this.state.imagevusuvle,src:T.a+"resource/DatangP.png",onVisibleChange:function(t){e.setState({imagevusuvle:t})}}})]}):"",2==this.state.choseMenuNum&&this.state.showTooltip?Object(v.jsxs)("div",{className:"info_box56",children:[Object(v.jsxs)("div",{className:"details_info_box_flex ",children:[Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[" ",this.props.t("Number_of_coins_received"),":"]}),Object(v.jsx)("span",{className:"details_info_txt",children:this.state.swapPrice})]}),Object(v.jsxs)("div",{className:"details_info_box ",children:[Object(v.jsxs)("span",{className:"details_info_title",children:[" ",this.props.t("Receiving_order"),":"]}),Object(v.jsxs)("span",{className:"details_info_txt",children:[Object(v.jsx)("span",{className:"main_info_box_item_s2 main_info_box_item_s3",onClick:function(){return e.setState({showTooltip2:!e.state.showTooltip2})},children:this.props.t("click_to_view")}),1==this.state.showTooltip2?Object(v.jsx)("div",{className:"Tooltip_title\u2014\u2014box",children:this.state.Tooltip_title}):""]})]}),Object(v.jsx)("div",{className:"details_info_box "})]}),Object(v.jsxs)("div",{className:"details_info_box info_box2",children:[Object(v.jsx)("span",{className:"details_info_title",children:" "}),Object(v.jsxs)("span",{className:"details_info_txt",children:[" ",this.state.timeStr]})]})]}):""]})]}),0===t?Object(v.jsx)(y,{NftDefaultDetail:this.state.NftDefaultDetail,nftAddress:this.props.item.NftAddress,tokenId:this.props.item.tokenId,owner:this.state.owner,isClaimed:this.state.isClaimed}):1===t?Object(v.jsx)(P,{NftDefaultDetail:this.state.NftDefaultDetail,nftAddress:this.props.item.NftAddress,tokenId:this.props.item.tokenId,owner:this.state.owner,isClaimed:this.state.isClaimed,isDatang:n}):Object(v.jsx)(E,{NftDefaultDetail:this.state.NftDefaultDetail,nftAddress:this.props.item.NftAddress,tokenId:this.props.item.tokenId,owner:this.state.owner,isClaimed:this.state.isClaimed,isDatang:n})]})]}),Object(v.jsxs)(b.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,className:"choiceIcon_box",footer:!1,closable:!1,children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:T.a+"resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-2px",top:"0px"},onClick:this.handleCancel}),Object(v.jsx)(w.a,{modalTitle:this.state.modalTitle,handleCancel:this.handleCancel,allCoinList:this.state.allCoinList,type:this.state.type,web3:this.state.web3,getTokenInfo:this.state.getTokenInfo,getPairInfo:this.state.getPairInfo,chainId:this.state.chainId,SwapData2:this.state.SwapData,slippage:this.state.slippage,defaultAccount:this.state.defaultAccount}),Object(v.jsx)("img",{className:"all_phone_show",src:T.a+"resource/close_new.svg",width:"40px",style:{position:"absolute",cursor:"pointer",left:"44%",bottom:"-54px",width:"40px",height:"40px"},onClick:this.handleCancel})]}),Object(v.jsxs)(b.a,{visible:this.state.visible2,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"/"==this.props.LinkUrl||"dark"==this.props.Theme?"ConfirmExchange_box":"light_img ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:T.a+"resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-2px",top:"-6px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_border",children:Object(v.jsxs)("div",{className:"/"==this.props.LinkUrl||"dark"==this.props.Theme?"dark_ConfirmExchangeResult_main2":"light_ConfirmExchangeResult_main2",children:[Object(v.jsx)(g.default,{type:this.state.swap_status}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_btn_border all_pc_show",children:Object(v.jsx)(m.a,{block:!0,size:"large",className:"SuccessOrFailureResult_box_btn",style:{boxShadow:"none"},type:"primary",onClick:this.handleOk,children:this.props.t("Mynftdetail_switch_off")},"submit")}),Object(v.jsx)("div",{className:"SuccessOrFailureResult_box_phone_close_span all_phone_show",children:Object(v.jsxs)("span",{className:"phone_close_span_s1",children:["Close after ",Object(v.jsx)("span",{className:"phone_close_span_s2",children:"3"}),"s...",Object(v.jsx)("span",{onClick:this.handleOk,className:"phone_close_span_s3",children:"Close Now"})]})})]})})]}),Object(v.jsxs)(b.a,{visible:this.state.visibleConfirmExchange,onOk:this.handleOk,onCancel:this.handleCancel,destroyOnClose:!0,footer:!1,closable:!1,className:"ConfirmExchange_box",children:[Object(v.jsx)("img",{className:"all_pc_show close_pc_img",src:T.a+"resource/close_new.svg",width:"24px",style:{position:"absolute",cursor:"pointer",right:"-2px",top:"-6px"},onClick:this.handleCancel}),Object(v.jsx)("div",{className:"ConfirmExchangeResult_border2",children:Object(v.jsxs)("div",{className:"ConfirmExchangeResult_main2",children:[Object(v.jsx)(x.a,{VICamount:this.state.VICamount,tradeNum:this.state.swapVic.tradeNum,modalTitle:this.props.t("home_cannot_confirm")}),Object(v.jsx)("div",{className:"btn_border",children:Object(v.jsx)(m.a,{htmlType:"submit",block:!0,size:"large",className:"ConfirmExchange_box_btn",style:{boxShadow:"none"},type:"primary",onClick:function(){return e.onSubmitConfirm()},children:this.props.t("home_cannot_confirm")},"submit")})]})})]})]})})}}]),s}(d.a.Component);t.default=Object(f.b)(k.b,k.a)(Object(_.a)()(F))}}]);